<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>9. Время и порядок. Время в централизованных и распределенных системах. Физические часы. Ошибки. Глобальные часы. Неопределенность времени. Логические часы. Порядок: полный и частичный</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-default_background {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 237, 214, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 237, 214, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(0, 0, 0, 0.06); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(249, 228, 188, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="fdcef7a6-747c-42f6-9eab-6f5eb05c8713" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">🚀</span></div><h1 class="page-title">9. Время и порядок. Время в централизованных и распределенных системах. Физические часы. Ошибки. Глобальные часы. Неопределенность времени. Логические часы. Порядок: полный и частичный</h1><p class="page-description"></p></header><div class="page-body"><h3 id="4f1b80d9-d045-401f-a05d-dd64819db389" class="">Взаимосвязь времени и порядка</h3><p id="581ae8bf-ddf9-4e72-b7e5-707dc579d280" class=""><strong>Время</strong> может быть определено по <strong>порядку </strong>некоторых событий, таких как тиканье часов.</p><p id="61c8ce17-eed3-4ff3-976a-c5f44072af5b" class="">В то же время <strong>порядок</strong> некоторых событий также может быть определен на основе <strong>времени</strong>, когда произошло каждое из этих событий.</p><p id="aac59df6-c962-4694-900c-479cab2d7007" class="">Проблемы могут возникать в этим в распределенных системах, так как отсутствуют как таковые глобальные часы</p><p id="2b608848-38c1-4dab-a292-e7f7dadce06e" class="">
</p><p id="be1388bb-9be1-4306-991a-efa8d560e083" class="block-color-orange_background"><strong>Зачем нам нужно время: определении порядка между событиями.</strong></p><p id="950f2add-1f0c-426b-8b55-a3f5a3175c52" class="">
</p><p id="62437317-5f2a-434a-b80b-1edbcc4dcb86" class="">Пример: система может захотеть установить порядок для запросов, получаемых одновременно разными клиентами, чтобы определить, в каком порядке должны выполняться последствия каждого запроса.</p><hr id="7ba437d3-3f30-4fc3-b3d6-3ed17531c874"/><h3 id="1290eb7e-27cb-43a0-8b4a-455f8b6d8f3e" class="">Время в централизованных и децентрализованных системах</h3><p id="416afbb0-6504-4258-a456-a8e25abf8385" class="">Существует основное различие между централизованной системой и распределенной многоузловой системой в отношении времени. системах первого типа имеется только один узел и, следовательно, только одни часы. Это означает, что можно поддерживать иллюзию единого, универсального измерения времени, которое может определять порядок различных событий в одном узле системы. </p><p id="1286acd7-63df-4b93-8957-be2fdd471e48" class="">В распределенной в системе каждый узел имеет свои собственные часы, и каждый из этих часов может работать с разной скоростью или степенью детализации, что означает, что они будут отдаляться друг от друга. Как следствие этого, в распределенной системе отсутствуют глобальные часы, которые можно было бы использовать для упорядочивания событий, происходящих на разных узлах системы.</p><hr id="5e66009f-9034-44d0-a5b3-caf5fd647c53"/><h2 id="865931a5-42f9-4610-a786-0eb87c2d2de7" class="">Физические часы</h2><p id="19d5ce0b-685d-4623-902c-0fdeb17dba9c" class="">Часы, используемые в реальных системах, - это то, что мы обычно называем <strong>физическими часами. Физические часы</strong> - это физический процесс, связанный с методом измерения этого процесса для регистрации хода времени . Большинство физических часов основаны на циклических процессах.</p><p id="5bdcbd47-7566-4cfc-85a4-a3c8813cacf1" class=""><strong>Примеры: </strong>кварцевые часы, атомные часы, солнечные часы</p><h3 id="8fc418a1-1d35-4c50-89aa-b011ed30cf95" class="">Проблемы:</h3><p id="16cc35ab-18a0-4097-be84-b871ee7261fc" class="">Могут быть ошибки, связанные как с используемыми инструментами измерения, так и с самими реальными физическими процессами. В результате, независимо от того, как часто мы синхронизируем эти часы друг с другом или с другими часами, которые имеют более точные методы измерения, всегда будет наблюдаться перекос между различными часами, задействованными в распределенной системе. При построении распределенной системы необходимо учитывать эту разницу между часами учитывается, и система в целом не должна работать в предположении, что все эти часы одинаковы и могут действовать как единые глобальные часы.</p><p id="cd384809-e552-4008-a70a-5190d1f023ce" class=""><strong>Пример</strong>:</p><figure id="b7a4e010-45e8-4fc9-ac98-f129c610f692" class="image"><a href="9%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B8%20%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B2%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%20fdcef7a6747c42f69eab6f5eb05c8713/Untitled.png"><img style="width:2000px" src="9%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B8%20%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B2%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%20fdcef7a6747c42f69eab6f5eb05c8713/Untitled.png"/></a></figure><p id="3f8d39e9-e848-41af-b701-285b115b71f1" class="">Давайте предположим, что у нас есть распределенная система, состоящая из 3 разных узлов A, B и C. Каждый раз, когда на узле происходит событие, узел присваивает событию временную метку, используя свои собственные часы, а затем распространяет это событие на другие узлы. Поскольку узлы получают события от других узлов, они сравнивают временные метки, связанные с этими событиями, для определения порядка, в котором происходили события. Если бы все часы были абсолютно точными и показывали точно одно и то же время, то эта схема теоретически была бы способна идентифицировать порядок. Однако, если существует перекос между часами различных узлов, корректность системы нарушается. Более конкретно, в нашем примере мы предполагаем, что часы узла A работают с опережением часов узла B. Таким же образом, часы узла C работают за часы узла B. В результате, даже если событие в узле A произошло раньше события в узле C, узел B сравнит соответствующие временные метки и будет считать, что событие из узла C произошло первым.</p><h3 id="cd0f1d1b-f38c-4b5e-941b-17eb0c5a80c0" class="">Решение</h3><p id="083aad2e-c446-4043-b417-4c107fd2196d" class="">Итак, с практической точки зрения, лучшее, что мы могли бы сделать - это признать, что всегда будет разница между часами разных узлов в системе, и каким-то образом выявить эту неопределенность, чтобы различные узлы в системе могли справиться с ней соответствующим образом. Spanner - это система, которая следует этому подходу, используя TrueTime API, который непосредственно раскрывает эту неопределенность с помощью использования временных интервалов (встраивание ошибки) вместо обычных временных меток.</p><h3 id="036bd74c-57a4-4b45-8172-e77bd254630e" class="">TrueTime</h3><p id="7b007ab4-9bbb-43b9-a8c4-9ce3c3f2d91f" class="">TrueTime - это решение Google для предоставления глобально согласованных временных меток для определения порядка событий.<br/>– Хорошо спроектированные и точные атомные часы GPS<br/>– Представление времени в виде интервала неопределенности<br/></p><figure id="694d6f7b-21a4-464b-94b3-9dfdee5e87e9" class="image"><a href="9%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B8%20%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B2%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%20fdcef7a6747c42f69eab6f5eb05c8713/Untitled%201.png"><img style="width:2000px" src="9%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B8%20%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B2%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%20fdcef7a6747c42f69eab6f5eb05c8713/Untitled%201.png"/></a></figure><p id="41f7891e-06f9-4214-8c5e-6280b51080e8" class=""><strong>Пояснение: </strong>просто берет время, которое сейчас, далее отступает от него на эпсилон. Получаем интервал. Далее работает с этим интервалом</p><h2 id="6108592b-b99b-4a14-9cd0-421ddd1a2ab5" class="">Теоретическая точка зрения</h2><p id="e1cee937-5253-4148-bcc1-47c2fa598c66" class=""><strong>невозможно в абсолютном смысле сказать, что два различных события происходят одновременно, если эти события разделены в пространстве.</strong></p><h3 id="7213b787-20df-4667-8259-22986e10d5ca" class="">Пример: мысленный эксперимент с вагонами</h3><p id="fe199d46-dd8c-4bbc-9aec-7b7d0738561f" class="">Он состоит из поезда с наблюдателем, расположенным в середине вагона, и другого наблюдателя, стоящего на платформе, когда поезд проезжает мимо. A вспышка света появляется в середине вагона как раз в тот момент, когда два наблюдателя встречаются друг с другом. Для наблюдателя внутри вагона обе стороны вагона находятся на одинаковом расстоянии от середины, поэтому свет достигнет обеих сторон одновременно. Для наблюдателя, стоящего на платформе, задняя сторона движется к начальной точке вспышки, в то время как передняя сторона удаляется от нее, поэтому свет достигнет двух сторон в разные моменты времени, поскольку скорость света одинакова для всех направлений. В результате происходят два пространственно разделенных события в одно и то же время (одновременно), не является абсолютным, а зависит от системы отсчета наблюдателя.</p><figure id="bd530565-10ea-4a96-bde4-97df0079330a" class="image"><a href="9%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B8%20%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B2%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%20fdcef7a6747c42f69eab6f5eb05c8713/Untitled%202.png"><img style="width:288px" src="9%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B8%20%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B2%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%20fdcef7a6747c42f69eab6f5eb05c8713/Untitled%202.png"/></a></figure><p id="93d98518-29ca-451f-948d-cd1838ebfd75" class=""><strong>Важно</strong>: на практике теория относительности не является проблемой для вычислительных систем, поскольку все современные вычислительные системы человечества имеют достаточно близкую систему отсчета, чтобы сделать релятивистские различия в восприятии времени несущественными.</p><h3 id="d55a2df4-7d7f-4f7b-b983-e842b65acd89" class="">Наблюдения за распределенными системами</h3><ol type="1" id="645e9df0-1a39-4b1a-ab6b-f16dbd15aa66" class="numbered-list" start="1"><li>События происходят на разных узлах системы, и требуется некоторое время, чтобы информация о том, что эти события произошли, распространилась на другие узлы системы.</li></ol><ol type="1" id="e8d667b5-10b3-48b5-8827-b99a6eb142f8" class="numbered-list" start="2"><li>Скорость света постоянна, но скорость, с которой информация передается в распределенной системе, является переменной, поскольку она зависит от базовой инфраструктуры и условий работы сети.</li></ol><ol type="1" id="863d8709-4e39-4aaa-85f7-04b5643d9e97" class="numbered-list" start="3"><li>В худшем случае информация может вообще не передаваться между двумя частями системы из-за сетевого разрыва.</li></ol><hr id="5e198fce-78c2-4d8d-97a1-e21b1880feb8"/><h2 id="92012ddd-8d34-46d0-883d-c8b7c3838bd0" class="">Логические часы</h2><p id="226a9076-fa69-4589-a2ec-1c9a9edd6e48" class=""><strong>Логические часы</strong> - это часы, которые не полагаются на физические процессы для отслеживания времени. Вместо этого они используют сообщения, которыми обмениваются узлы системы, что является основным механизмом передачи информации в распределенной системе.</p><p id="10690084-ea92-44ab-9da2-157ca1ad2372" class="">Мы можем представить себе тривиальную форму таких часов в системе, состоящей только из одного узла. Вместо использования физических часов этот узел мог бы вместо этого использовать логические часы, которые состояли бы из одного метода, скажем, getTime(). При вызове этот метод возвращал бы счетчик, который впоследствии был бы увеличен. Например, если система запустилась в 9:00, а события A, B и C произошли в 9:01, 9:05 и 9:55 соответственно, то им могут быть присвоены временные метки 1, 2 и 3. В результате система по-прежнему могла бы упорядочивать события, но она не смогла бы определить временное расстояние между любыми двумя событиями.</p><hr id="d9250dc7-cbfd-4ece-a009-c1a18d5d3371"/><h3 id="c0bdd370-f17d-46e8-81e2-a81a4eefddc6" class="">Отношение общего порядка</h3><p id="de8409d5-55ff-4450-93c9-e3212f32928f" class=""><strong>Общий порядок </strong>- это бинарное отношение, которое можно использовать для сравнения любых 2 элементов набора друг с другом. Как прямое следствие этого свойства, используя это отношение, мы можем вывести только один порядок для всех элементов в наборе, вот почему оно называется общим порядком. <strong>Например, </strong>набор уникальных целых чисел {7, 9, 3, 2, 6} могут быть полностью упорядочены (используя отношение меньше &lt;), и соответствующий общий порядок равен [2, 3, 6, 7, 9].</p><h3 id="0f5c650a-cc8e-43ff-bd76-9cb9eeeea7e0" class="">Отношение частичного порядка</h3><p id="ae3da716-4d94-4ed6-99ca-5f60e3cd563c" class=""><strong>Частичный порядок</strong> - это бинарное отношение, которое может использоваться для сравнения только некоторых элементов множества друг с другом. Как следствие, используя это отношение, мы можем получить несколько допустимых порядков для всех элементов в наборе.  Например, набор из следующих наборов целых чисел {{0}, {1}, {2}, {0,1}, {1,2}} может быть упорядочен только частично, используя отношение подмножества ⊆. Если мы выберем элементы {0} и {0,1}, то они могут быть упорядочены, поскольку {0} ⊆ {0,1}. Однако элементы {0,1} и {1,2} не могут быть упорядочены с использованием этого отношения, поскольку ни {0,1} ⊆ {1,2}, ни {1,2} ⊆ {0,1} не выполняются. В результате оба [{0}, {1}, {2}, {0,1}, {1,2}] и [{2}, {1}, {0}, {1,2}, {0,1}] были бы допустимыми.</p><hr id="bf0fcbec-2eb2-4071-8036-12243fa86a86"/><h3 id="e52d6816-282b-42a9-b720-80ea8aba7b94" class="">Проблемы порядков в распределенных системах</h3><p id="72202dd1-3efe-48fd-a9b9-c1cbebed58f1" class="">В системах, состоящих из одного узла, легко и интуитивно определить общий порядок событий. Основная причина заключается в том, что существует единый субъект, где происходят все события, поэтому этот субъект может устанавливать общий порядок для этих событий по мере их возникновения. Общие порядки также значительно упрощают создание протоколов и алгоритмов. Однако в распределенной системе не так просто установить общий порядок событий, поскольку в системе имеется несколько узлов, и события могут происходить одновременно на разных узлах. В результате распределенная система может использовать любое допустимое частичное упорядочение происходящих событий, если нет строгой необходимости в полном упорядочении. </p><figure id="6ecda409-0dc0-467d-8754-a8a870acfc92" class="image"><a href="9%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B8%20%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B2%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%20fdcef7a6747c42f69eab6f5eb05c8713/Untitled%203.png"><img style="width:975px" src="9%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B8%20%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B2%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%20fdcef7a6747c42f69eab6f5eb05c8713/Untitled%203.png"/></a></figure><p id="6a6e6ead-6d77-4d8f-8f7b-095ef0cb6bea" class="">Тот факт, что эти операции имеют некоторую продолжительность и чередуются друг с другом, является не единственной проблемой, которая затрудняет достижение полного порядка.</p><p id="9a0aa68e-56f3-4e60-8cd6-018bce739ab4" class=""><br/>Даже если эти операции являются мгновенными (также называемыми линеаризуемыми), то достичь полного упорядочения все равно нетривиально, поскольку глобальных часов не существует глобальных часов (Часы на разных процессах могут работать со своей частотой, из-за этого могу возникать определенные ошибки во времени. <br/></p><figure id="5d97b638-f179-42d0-8333-00cb8340232c" class="image"><a href="9%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B8%20%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B2%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%20fdcef7a6747c42f69eab6f5eb05c8713/Untitled%204.png"><img style="width:2000px" src="9%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B8%20%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA%20%D0%92%D1%80%D0%B5%D0%BC%D1%8F%20%D0%B2%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B8%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%20fdcef7a6747c42f69eab6f5eb05c8713/Untitled%204.png"/></a></figure></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>